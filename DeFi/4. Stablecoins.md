# Stablecoins

## Overview

Stablecoins are cryptocurrencies designed to maintain a stable value relative to a reference asset, typically the US Dollar. They serve as the bridge between volatile crypto assets and stable fiat currencies, enabling DeFi to function as a practical financial system.

## Why Stablecoins Matter

### Problems They Solve
1. **Volatility:** Crypto prices fluctuate wildly
2. **Unit of Account:** Need stable pricing for goods/services
3. **Store of Value:** Preserve purchasing power
4. **Settlement:** Predictable transaction values
5. **DeFi Liquidity:** Stable trading pairs and collateral

### Use Cases
- Trading and arbitrage
- Lending and borrowing
- Payments and remittances
- Yield farming
- Hedging crypto exposure
- Cross-border transactions

## Types of Stablecoins

### 1. Fiat-Collateralized Stablecoins

**Mechanism:** Backed 1:1 by fiat currency held in reserve

**Examples:** USDC, USDT, BUSD, TUSD

**Characteristics:**
- Centralized custody
- Requires trust in issuer
- Subject to regulation
- Simple to understand
- High capital efficiency

**USDC (Circle):**
```
Reserves: US Dollars + short-term US Treasuries
Attestations: Monthly reports by Grant Thornton
Redemption: 1 USDC = $1 USD
Issuance: KYC required for minting/burning
```

**USDT (Tether):**
```
Market Cap: Largest stablecoin (~$100B+)
Reserves: Mix of cash, treasuries, commercial paper
Controversy: Historical transparency issues
Usage: Dominant in CEX trading
```

**Pros:**
- Price stability
- Liquidity
- Wide adoption

**Cons:**
- Centralization risk
- Regulatory risk
- Counterparty risk
- Requires audits/attestations


### 2. Crypto-Collateralized Stablecoins

**Mechanism:** Backed by crypto assets, typically overcollateralized

**Examples:** DAI, sUSD, LUSD

**Characteristics:**
- Decentralized
- Trustless
- Transparent on-chain
- Capital inefficient (overcollateralization)
- Vulnerable to crypto volatility

**DAI (MakerDAO):**

**Collateralization:**
```
Minimum Collateral Ratio: 150% (varies by asset)
Collateral Types: ETH, WBTC, USDC, and 50+ assets
Stability Fee: Variable interest rate (0.5% - 5%)
```

**Minting Process:**
```
1. Deposit $200 worth of ETH
2. Mint up to $133 DAI (150% collateralization)
3. Pay stability fee on debt
4. Repay DAI + fees to unlock collateral
```

**Liquidation:**
```
If collateral value drops below threshold:
- Vault liquidated via auction
- 13% liquidation penalty
- Remaining collateral returned to user
```

**Peg Stability Mechanisms:**
1. **DAI Savings Rate (DSR):** Interest for holding DAI
2. **Stability Fee:** Cost of minting DAI
3. **Peg Stability Module (PSM):** Direct USDC ↔ DAI swaps
4. **Liquidations:** Remove DAI from circulation

**Mathematical Model:**
```
Target Price: $1.00

If DAI > $1.01:
- Decrease DSR (less demand)
- Decrease Stability Fee (more supply)
- Result: Price decreases

If DAI < $0.99:
- Increase DSR (more demand)
- Increase Stability Fee (less supply)
- Result: Price increases
```

**Pros:**
- Decentralized
- Censorship-resistant
- Transparent
- No single point of failure

**Cons:**
- Capital inefficient
- Complexity
- Liquidation risk
- Scalability limitations

### 3. Algorithmic Stablecoins

**Mechanism:** Use algorithms and incentives to maintain peg without collateral

**Examples:** FRAX (hybrid), UST (failed), AMPL

**Characteristics:**
- Capital efficient
- Scalable
- High risk
- Complex mechanisms
- History of failures

**Rebase Mechanism (AMPL):**

Ampleforth adjusts supply based on price:

```
If Price > $1.05:
- Increase supply (positive rebase)
- All holders get more tokens
- Price pressure downward

If Price < $0.95:
- Decrease supply (negative rebase)
- All holders lose tokens
- Price pressure upward

Target: $1.00 (adjusted for CPI)
```

**Example:**
```
You hold: 1000 AMPL
Price: $1.10
Rebase: +10%
New balance: 1100 AMPL
New price: ~$1.00
Value unchanged: $1,100
```

**Seigniorage Shares Model:**

Two-token system:
- **Stablecoin:** Maintains $1 peg
- **Shares:** Absorbs volatility

```
If Stablecoin > $1:
- Mint new stablecoins
- Distribute to share holders
- Increases supply, lowers price

If Stablecoin < $1:
- Sell bonds at discount
- Burn stablecoins from bond sales
- Decreases supply, raises price
```

**UST/LUNA Death Spiral (Case Study):**

Terra's algorithmic stablecoin collapsed in May 2022:

```
Mechanism:
- 1 UST always redeemable for $1 of LUNA
- Arbitrageurs maintain peg

Death Spiral:
1. Large UST sell pressure
2. UST depegs to $0.90
3. Arbitrageurs mint LUNA to buy cheap UST
4. LUNA supply inflates massively
5. LUNA price crashes
6. Confidence lost, more UST selling
7. Hyperinflation of LUNA
8. Both tokens collapse to near-zero

Loss: ~$60 billion in value destroyed
```

**Lessons:**
- Algorithmic stables are fragile
- Require constant demand growth
- Vulnerable to bank runs
- Need robust collateral backing

**Pros:**
- Capital efficient
- Scalable
- Decentralized

**Cons:**
- High risk of depeg
- Complex mechanisms
- Death spiral risk
- Unproven long-term

### 4. Hybrid Stablecoins

**Mechanism:** Combine multiple approaches

**FRAX:**

Fractional-algorithmic stablecoin:

```
Collateral Ratio (CR): Dynamic, currently ~92%

Minting 1 FRAX requires:
- $0.92 USDC (collateral)
- $0.08 FXS (burned)

Redeeming 1 FRAX returns:
- $0.92 USDC
- $0.08 FXS (minted)
```

**CR Adjustment:**
```
If FRAX > $1.00 for 1 hour:
- Decrease CR by 0.25%
- Less collateral needed

If FRAX < $1.00 for 1 hour:
- Increase CR by 0.25%
- More collateral needed
```

**Advantages:**
- More capital efficient than fully collateralized
- More stable than purely algorithmic
- Adaptive to market conditions

## Peg Maintenance Mechanisms

### 1. Arbitrage

Price discrepancies create profit opportunities:

```
If USDC = $1.00 and DAI = $0.98:
1. Buy DAI for $0.98
2. Swap DAI → USDC via PSM
3. Sell USDC for $1.00
4. Profit: $0.02 per DAI

This buying pressure pushes DAI back to $1.00
```

### 2. Interest Rate Adjustments

**Increase rates when price < $1:**
- Higher DSR attracts buyers
- Higher stability fee reduces supply

**Decrease rates when price > $1:**
- Lower DSR reduces demand
- Lower stability fee increases supply

### 3. Direct Intervention

**Peg Stability Module (PSM):**
```
Allows 1:1 swaps between DAI and USDC
Fee: 0% - 0.1%
Instantly stabilizes severe depegs
```

### 4. Collateral Auctions

Liquidations remove stablecoins from circulation:
```
Undercollateralized vault → Auction collateral → Burn DAI
```

## Stablecoin Risks

### 1. Depeg Risk

Factors causing depegs:
- Loss of confidence
- Insufficient collateral
- Oracle failures
- Smart contract bugs
- Regulatory action
- Market manipulation

**Historical Depegs:**
```
USDC (March 2023): $0.88 (SVB exposure)
DAI (March 2023): $0.90 (USDC collateral)
UST (May 2022): $0.00 (death spiral)
USDT (2018): $0.85 (banking issues)
```

### 2. Centralization Risk

Fiat-backed stablecoins can:
- Freeze addresses
- Blacklist users
- Seize funds
- Halt operations

**Example:**
```
USDC blacklisted addresses: 100+
Frozen funds: Millions of dollars
Reason: Regulatory compliance
```

### 3. Collateral Risk

Crypto-backed stablecoins face:
- Collateral volatility
- Liquidation cascades
- Oracle manipulation
- Smart contract vulnerabilities

### 4. Regulatory Risk

Stablecoins face increasing scrutiny:
- Banking regulations
- Securities laws
- AML/KYC requirements
- Reserve requirements
- Licensing

## Stablecoin Metrics

### 1. Market Capitalization
```
Total supply × price
```

### 2. Peg Deviation
```
Deviation = |Current Price - Target Price| / Target Price × 100%
```

### 3. Collateralization Ratio
```
CR = Total Collateral Value / Total Stablecoin Supply × 100%
```

### 4. Redemption Rate
```
Successful redemptions / Total redemption attempts
```

### 5. Liquidity Depth
```
Available liquidity within 1% of peg price
```

## Advanced Concepts

### Curve's 3pool

Largest stablecoin liquidity pool:
```
Assets: USDC, USDT, DAI
TVL: $3B+
Purpose: Low-slippage stablecoin swaps
Mechanism: StableSwap AMM
```

### Yield-Bearing Stablecoins

Stablecoins that automatically earn yield:
- **sDAI:** DAI earning DSR
- **aUSDC:** USDC earning Aave interest
- **yvUSDC:** USDC in Yearn vaults

### Cross-Chain Stablecoins

Bridging stablecoins across chains:
- **Native:** Issued on multiple chains (USDC)
- **Wrapped:** Bridged via protocols (Wormhole, LayerZero)
- **Synthetic:** Minted on destination chain

## Code Example: Simple Stablecoin

```solidity
contract SimpleStablecoin {
    mapping(address => uint256) public balances;
    mapping(address => uint256) public collateral; // ETH collateral
    
    uint256 public constant COLLATERAL_RATIO = 150; // 150%
    uint256 public constant LIQUIDATION_RATIO = 120; // 120%
    uint256 public constant LIQUIDATION_PENALTY = 10; // 10%
    
    function depositCollateral() external payable {
        collateral[msg.sender] += msg.value;
    }
    
    function mint(uint256 amount) external {
        uint256 maxMint = (collateral[msg.sender] * 100) / COLLATERAL_RATIO;
        require(balances[msg.sender] + amount <= maxMint, "Insufficient collateral");
        balances[msg.sender] += amount;
    }
    
    function burn(uint256 amount) external {
        require(balances[msg.sender] >= amount, "Insufficient balance");
        balances[msg.sender] -= amount;
    }
    
    function withdrawCollateral(uint256 amount) external {
        collateral[msg.sender] -= amount;
        uint256 maxMint = (collateral[msg.sender] * 100) / COLLATERAL_RATIO;
        require(balances[msg.sender] <= maxMint, "Would be undercollateralized");
        payable(msg.sender).transfer(amount);
    }
    
    function getCollateralRatio(address user) public view returns (uint256) {
        if (balances[user] == 0) return type(uint256).max;
        return (collateral[user] * 100) / balances[user];
    }
    
    function liquidate(address user) external {
        require(getCollateralRatio(user) < LIQUIDATION_RATIO, "Not liquidatable");
        
        uint256 debt = balances[user];
        uint256 collateralToSeize = debt * (100 + LIQUIDATION_PENALTY) / 100;
        
        balances[user] = 0;
        collateral[user] -= collateralToSeize;
        payable(msg.sender).transfer(collateralToSeize);
    }
}
```

## Future of Stablecoins

### Trends
1. **Regulatory clarity:** Clear frameworks emerging
2. **CBDC competition:** Central bank digital currencies
3. **Real-world assets:** Tokenized treasuries as collateral
4. **Cross-chain standards:** Unified stablecoin protocols
5. **Privacy features:** Zero-knowledge stablecoins

### Innovations
- **Reflexer (RAI):** Unpegged stable asset
- **Liquity (LUSD):** Immutable, governance-free
- **Ethena (USDe):** Delta-neutral synthetic dollar

## Conclusion

Stablecoins are the foundation of DeFi, providing stability in a volatile ecosystem. Understanding their mechanisms, risks, and trade-offs is essential for anyone participating in decentralized finance.

---

*Next: Yield Farming and Liquidity Mining*
